<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle Financeiro Pessoal</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <h1>Controle Financeiro Pessoal</h1>

        <nav id="menu-navegacao">
            <button data-target="lancamento" class="active">Lançamento</button>
            <button data-target="resumo">Resumo</button>
            <button data-target="reserva">Reserva</button>
            <button data-target="investimentos">Investimentos</button>
            <button data-target="historico">Histórico</button>
        </nav>

        <section id="lancamento" class="tela-ativa">
            <div class="card">
                <h3>Adicionar Novo Lançamento</h3>
                <form id="formulario-lancamento">
                    <label for="data">Data:</label>
                    <input type="date" id="data" required>

                    <label for="descricao">Descrição:</label>
                    <input type="text" id="descricao" list="lista-descricoes" required>
                    <datalist id="lista-descricoes">
                        </datalist>

                    <label for="categoria">Categoria:</label>
                    <input type="text" id="categoria" list="lista-categorias" required>
                    <datalist id="lista-categorias">
                        </datalist>

                    <label for="valor">Valor:</label>
                    <input type="number" id="valor" step="0.01" required>

                    <label for="tipo">Tipo:</label>
                    <select id="tipo" required>
                        <option value="receita">Receita</option>
                        <option value="despesa">Despesa</option>
                    </select>

                    <button type="submit">Adicionar</button>
                </form>
            </div>
        </section>

        <section id="resumo" class="tela-inativa">
            <div class="card">
                <h3>Resumo Financeiro</h3>
                <p>Receita Total: <span id="receita-total">R$ 0,00</span></p>
                <p>Despesa Total: <span id="despesa-total">R$ 0,00</span></p>
                <p>Saldo Final: <span id="saldo-final">R$ 0,00</span></p>
                <button id="limpar-dados">Limpar Todos os Dados</button>
            </div>
            
            <div class="card">
                <h3>Distribuição de Despesas</h3>
                <canvas id="grafico-despesas"></canvas>
            </div>
        </section>

        <section id="reserva" class="tela-inativa">
            <div class="card">
                <h3>Reserva de Emergência</h3>
                <p>Meta: <span id="meta-reserva">R$ 0,00</span></p>
                <p>Acumulado: <span id="acumulado-reserva">R$ 0,00</span></p>
                <p>Progresso: <span id="progresso-reserva">0%</span></p>
                <button id="definir-meta">Definir Meta</button>
            </div>
        </section>
        
        <section id="investimentos" class="tela-inativa">
            <div class="card">
                <h3>Objetivos de Investimento</h3>
                <form id="formulario-objetivo">
                    <label for="nome-objetivo">Nome do Objetivo:</label>
                    <input type="text" id="nome-objetivo" required>
                    
                    <label for="valor-objetivo">Valor da Meta:</label>
                    <input type="number" id="valor-objetivo" required>
                    
                    <button type="submit">Adicionar Objetivo</button>
                </form>
                <div id="lista-objetivos">
                    </div>
            </div>
        </section>

        <section id="historico" class="tela-inativa">
            <div class="card">
                <h2>Histórico de Lançamentos</h2>
                <div class="filtro-container">
                    <input type="text" id="filtro-descricao" placeholder="Buscar por descrição...">
                    <input type="date" id="filtro-data-inicio">
                    <input type="date" id="filtro-data-fim">
                    <select id="filtro-categoria">
                        <option value="">Todas as Categorias</option>
                    </select>
                </div>
                <div class="export-buttons">
                    <button id="exportar-excel">Exportar para Excel</button>
                    <button id="exportar-pdf">Exportar para PDF</button>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Data</th>
                            <th>Descrição</th>
                            <th>Categoria</th>
                            <th>Valor</th>
                            <th>Tipo</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody id="tabela-corpo">
                        </tbody>
                </table>
            </div>
        </section>
    </div>
    <script src="script.js"></script>
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/sw.js')
            .then(registration => {
              console.log('Service Worker registrado com sucesso:', registration);
            })
            .catch(error => {
              console.log('Falha ao registrar o Service Worker:', error);
            });
        });
      }
    </script>
</body>
</html>
